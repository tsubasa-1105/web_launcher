<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Launcher</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' fill='%234f46e5'%3E%3Crect x='10' y='10' width='35' height='35' rx='8' /%3E%3Crect x='55' y='10' width='35' height='35' rx='8' /%3E%3Crect x='10' y='55' width='35' height='35' rx='8' /%3E%3Crect x='55' y='55' width='35' height='35' rx='8' /%3E%3C/svg%3E">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Sortable.js CDN („Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„ÉóÁî®) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        /* OS„ÅÆ„ÉÄ„Éº„ÇØ„É¢„Éº„ÉâË®≠ÂÆö„Å´ËøΩÂæì */
        :root {
            color-scheme: light dark;
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Sortable.js „ÅÆ„Éâ„É©„ÉÉ„Ç∞‰∏≠„Çπ„Çø„Ç§„É´ */
        .sortable-ghost {
            opacity: 0.4;
            background-color: #4f46e5; /* indigo-600 */
        }
        .sortable-chosen {
            cursor: grabbing;
        }
        /* „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫Áî®„ÅÆ„Éà„É©„É≥„Ç∏„Ç∑„Éß„É≥ */
        .toast-message {
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .toast-enter {
            opacity: 0;
            transform: translateY(20px);
        }
        .toast-leave {
            opacity: 0;
            transform: translateY(20px);
        }
        /* „Ç´„Çπ„Çø„É†„Ç´„É©„Éº„Éî„ÉÉ„Ç´„Éº„ÅÆ„Çπ„Çø„Ç§„É´ */
        input[type="color"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 40px;
            height: 40px;
            padding: 0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background-color: transparent;
        }
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        input[type="color"]::-webkit-color-swatch {
            border: 2px solid #9ca3af; /* gray-400 */
            border-radius: 8px;
        }
        .dark input[type="color"]::-webkit-color-swatch {
            border-color: #4b5563; /* gray-600 */
        }
        /* FirefoxÁî® */
        input[type="color"]::-moz-color-swatch {
            border: 2px solid #9ca3af; /* gray-400 */
            border-radius: 8px;
        }
        .dark input[type="color"]::-moz-color-swatch {
            border-color: #4b5563; /* gray-600 */
        }
        /* ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº„ÅÆ„Éú„Çø„É≥„Çπ„Çø„Ç§„É´ */
        .emoji-btn {
            transition: transform 0.1s ease-out, background-color 0.1s;
        }
        .emoji-btn:hover {
            transform: scale(1.1);
            background-color: rgba(128, 128, 128, 0.1);
        }
        /* ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Çø„Éñ */
        .emoji-tab-btn {
            transition: background-color 0.1s, color 0.1s;
        }
        .emoji-tab-btn[aria-selected="true"] {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
        }
        .emoji-tab-btn[aria-selected="false"] {
            background-color: transparent;
            color: #6b7280; /* gray-500 */
        }
        .dark .emoji-tab-btn[aria-selected="false"] {
            color: #d1d5db; /* gray-300 */
        }
        .dark .emoji-tab-btn[aria-selected="true"] {
            background-color: #4f46e5; /* indigo-600 */
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen antialiased transition-colors duration-300">

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä -->
    <!-- ‚òÖ ‰øÆÊ≠£: max-w-4xl „Åã„Çâ max-w-5xl „Å´Â§âÊõ¥„Åó„ÄÅ2ÂàóË°®Á§∫„ÅÆ„Çπ„Éö„Éº„Çπ„ÇíÁ¢∫‰øù -->
    <div class="container mx-auto max-w-5xl p-4 sm:p-8">
        
        <!-- „Éò„ÉÉ„ÉÄ„Éº„Å®Ë®≠ÂÆö„Éà„Ç∞„É´ -->
        <header class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">
                Web Launcher
            </h1>
            
            <div class="flex items-center gap-3">
                <!-- Á∑®ÈõÜ„É¢„Éº„ÉâÊôÇ„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ (ÂàùÊúüÈùûË°®Á§∫) -->
                <div id="edit-mode-actions" class="hidden flex items-center gap-3">
                    <button id="cancel-changes" class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 font-medium hover:bg-gray-300 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-400">
                        „Ç≠„É£„É≥„Çª„É´
                    </button>
                    <button id="save-changes" class="px-4 py-2 rounded-lg bg-indigo-600 text-white font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        ‰øùÂ≠ò
                    </button>
                </div>

                <!-- Ë®≠ÂÆö„É¢„Éº„Éâ„Éà„Ç∞„É´„Éú„Çø„É≥ -->
                <button id="toggle-edit-mode" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 text-white font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-all">
                    <!-- Icon: Settings (Edit Mode OFF) -->
                    <svg id="icon-settings" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0M3.75 18H7.5m3-6h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0M3.75 12H7.5" />
                    </svg>
                    <!-- Icon: Close (Edit Mode ON) -->
                    <svg id="icon-close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 hidden">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                    <span id="toggle-edit-text">Ë®≠ÂÆö„É¢„Éº„Éâ</span>
                </button>
            </div>
        </header>

        <!-- „É™„É≥„ÇØ‰∏ÄË¶ß -->
        <main>
            <!-- Êñ∞Ë¶èËøΩÂä†„Éú„Çø„É≥ (Ë®≠ÂÆö„É¢„Éº„ÉâÊôÇ„ÅÆ„ÅøË°®Á§∫) -->
            <div id="add-card-container" class="hidden mb-6">
                <button id="add-new-card-btn" class="w-full py-4 px-6 border-2 border-dashed border-gray-400 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-indigo-500 hover:text-indigo-500 transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                    <span>Êñ∞„Åó„ÅÑ„Ç´„Éº„Éâ„ÇíËøΩÂä†</span>
                </button>
            </div>

            <!-- ‚òÖ ‰øÆÊ≠£: lg:grid-cols-3 „ÇíÂâäÈô§„Åó„ÄÅmd:grid-cols-2 (‰∏≠ÁîªÈù¢‰ª•‰∏ä„Åß2Âàó) „Å´Â§âÊõ¥ -->
            <div id="links-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞„Çπ„Éî„Éä„Éº (ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇ) -->
                <!-- ‚òÖ ‰øÆÊ≠£: lg:col-span-3 „ÇíÂâäÈô§ -->
                <div id="loading-spinner" class="md:col-span-2 text-center py-12">
                    <svg class="animate-spin h-8 w-8 text-indigo-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-2 text-gray-500 dark:text-gray-400">Loading...</p>
                </div>
            </div>
            
            <!-- „Éá„Éº„Çø„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÅÆË°®Á§∫ (JS„ÅßÂà∂Âæ°) -->
            <div id="empty-state" class="hidden text-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 mx-auto text-gray-400">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244" />
                </svg>
                <h3 class="mt-4 text-lg font-medium text-gray-800 dark:text-gray-200">„É™„É≥„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</h3>
                <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">„ÄåË®≠ÂÆö„É¢„Éº„Éâ„Äç„Åã„ÇâÊñ∞„Åó„ÅÑ„É™„É≥„ÇØ„ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
            </div>
        </main>

        <!-- Ë®≠ÂÆö„É¢„Éº„Éâ UI („Éí„É≥„Éà„ÅÆ„Åø) -->
        <footer id="edit-controls" class="hidden mt-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700">
            <!-- „É™„É≥„ÇØ„ÅÆËøΩÂä†„Éï„Ç©„Éº„É†„ÅØÂâäÈô§„Åï„Çå„Åæ„Åó„Åü -->
            <!-- ‰øùÂ≠ò/„Ç≠„É£„É≥„Çª„É´„Éú„Çø„É≥„ÅØ„Éò„ÉÉ„ÉÄ„Éº„Å´ÁßªÂãï„Åó„Åæ„Åó„Åü -->
            <p class="text-sm text-gray-500 dark:text-gray-400 text-center">
                „Éí„É≥„Éà: „Ç´„Éº„Éâ„Çí„Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„Éó„Åó„Å¶‰∏¶„Å≥Êõø„Åà„Åß„Åç„Åæ„Åô„ÄÇ
            </p>
        </footer>
    </div>

    <!-- „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫„Ç®„É™„Ç¢ („Éà„Éº„Çπ„Éà) -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2">
        <!-- JS„Åß„É°„ÉÉ„Çª„Éº„Ç∏„ÅåÊåøÂÖ•„Åï„Çå„Åæ„Åô -->
    </div>

    <!-- ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº („É¢„Éº„ÉÄ„É´) -->
    <div id="emoji-picker-modal" class="hidden fixed inset-0 z-40 bg-black/30 dark:bg-black/50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="emoji-picker-title">
        <div id="emoji-picker-content" class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm max-h-[70vh] flex flex-col">
            <!-- „Éò„ÉÉ„ÉÄ„Éº„Å®Ê§úÁ¥¢„Éê„Éº -->
            <div class="p-3 border-b border-gray-200 dark:border-gray-700">
                <h3 id="emoji-picker-title" class="text-lg font-medium text-center mb-2">ÁµµÊñáÂ≠ó„ÇíÈÅ∏Êäû</h3>
                <input id="emoji-search-input" type="text" placeholder="ÁµµÊñáÂ≠ó„ÇíÊ§úÁ¥¢ (‰æã: Á¨ëÈ°î, dog, ...)" class="w-full px-3 py-2 rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100">
            </div>
            
            <!-- „Ç´„ÉÜ„Ç¥„É™„Çø„Éñ -->
            <div id="emoji-picker-tabs" class="p-2 flex flex-nowrap overflow-x-auto gap-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700" role="tablist">
                <!-- JS„Åß„Çø„Éñ„ÅåÊåøÂÖ•„Åï„Çå„Åæ„Åô -->
            </div>

            <!-- ÁµµÊñáÂ≠ó„Ç∞„É™„ÉÉ„Éâ -->
            <!-- ‚òÖ ‰øÆÊ≠£: grid-cols-8 „Åã„Çâ grid-cols-7 sm:grid-cols-8 „Å´Â§âÊõ¥ („É¢„Éê„Ç§„É´ÂØæÂøú) -->
            <div id="emoji-picker-grid" class="flex-1 overflow-y-auto p-3 grid grid-cols-7 sm:grid-cols-8 gap-1" role="grid">
                <!-- JS„ÅßÁµµÊñáÂ≠ó„ÅåÊåøÂÖ•„Åï„Çå„Åæ„Åô -->
            </div>
        </div>
    </div>

    <!-- JS (SPA„É≠„Ç∏„ÉÉ„ÇØ) -->
    <script type="module">
        // SVG„Ç¢„Ç§„Ç≥„É≥
        const icons = {
            copy: `
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.378h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.08-3.32-7.4-7.4-7.4S4.125 7.17 4.125 11.25v6.075c0 .621.504 1.125 1.125 1.125H6.75v-1.091c0-.67.204-1.3.562-1.841m7.5 0V11.25c0-1.556-1.26-2.816-2.816-2.816M9 11.25v1.5a2.816 2.816 0 002.816 2.816m0 0H12m2.25-4.5v-1.5c0-.67-.204-1.3-.562-1.841m-6.376 0c-.358.54-.562 1.17-.562 1.841v1.5m0 0V11.25c0-1.556 1.26-2.816 2.816-2.816M9 11.25v1.5a2.816 2.816 0 002.816 2.816m0 0H12m2.25-4.5v-1.5c0-.67-.204-1.3-.562-1.841m-6.376 0c-.358.54-.562 1.17-.562 1.841v1.5m0 0V11.25c0-1.556 1.26-2.816 2.816-2.816M9 11.25v1.5a2.816 2.816 0 002.816 2.816m0 0H12" />
                </svg>
            `,
            check: `
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-green-500">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                </svg>
            `,
            handle: `
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400 dark:text-gray-500 cursor-move">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5" />
                </svg>
            `,
            delete: `
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.502 0c-.342.052-.682.107-1.022.166m11.48 0A48.067 48.067 0 0012 5.109C8.742 5.109 5.89 5.426 3.27 5.79m14.456 0L12 5.109m0 0L9.26 5.79M12 5.109l.006.007l.006-.007M12 5.109l-.006.007l-.006-.007" />
                </svg>
            `
        };

// Êã°Âºµ: ÁµµÊñáÂ≠ó„Éá„Éº„Çø („Ç´„ÉÜ„Ç¥„É™„Å®„Ç≠„Éº„ÉØ„Éº„Éâ‰ªò„Åç)
        const emojiCategories = {
            smileys: "È°î",
            animals: "ÂãïÁâ©",
            travel: "Â†¥ÊâÄ",
            food: "È£ü„ÅπÁâ©",
            objects: "„É¢„Éé",
            symbols: "Ë®òÂè∑",
        };

        const emojiPickerData = [
            // È°î (Smileys & Emotion)
            { e: "üòÄ", k: ["Á¨ëÈ°î", "È°î", "smile", "face"], c: "smileys" },
            { e: "üòÉ", k: ["Â§ßÁ¨ë„ÅÑ", "happy"], c: "smileys" },
            { e: "üòÑ", k: ["„Å´„Åì„ÇÑ„Åã", "laugh"], c: "smileys" },
            { e: "üòÅ", k: ["Á¨ëÈ°î", "grin"], c: "smileys" },
            { e: "üòÜ", k: ["ÁàÜÁ¨ë", "laughing"], c: "smileys" },
            { e: "üòÖ", k: ["Ê±ó", "„ÅÇ„Åõ", "sweat"], c: "smileys" },
            { e: "üòÇ", k: ["Á¨ë„ÅÑÊ≥£„Åç", "Ê∂ô", "joy", "tear"], c: "smileys" },
            { e: "ü§£", k: ["Á¨ë„ÅÑËª¢„Åí„Çã", "rofl"], c: "smileys" },
            { e: "ü•≤", k: ["Â¨â„ÅóÊ≥£„Åç", "smile", "tear"], c: "smileys" },
            { e: "ü•π", k: ["ÊÑüÂãï", "Ê∂ôÁõÆ", "pleading"], c: "smileys" },
            { e: "üòä", k: ["ÂæÆÁ¨ë„Åø", "blush"], c: "smileys" },
            { e: "üòá", k: ["Â§©‰Ωø", "angel"], c: "smileys" },
            { e: "ü•∞", k: ["Â§ßÂ•Ω„Åç", "„Éè„Éº„Éà", "love", "cute"], c: "smileys" },
            { e: "üòç", k: ["„Éè„Éº„ÉàÁõÆ", "love", "heart eyes"], c: "smileys" },
            { e: "ü§©", k: ["„Çπ„Çø„Éº", "„Åç„Çâ„Åç„Çâ", "star"], c: "smileys" },
            { e: "üòò", k: ["„Ç≠„Çπ", "kiss"], c: "smileys" },
            { e: "üòã", k: ["„Åä„ÅÑ„Åó„ÅÑ", "„Éö„É≠", "yummy"], c: "smileys" },
            { e: "üòõ", k: ["ËàåÂá∫„Åó", "tongue"], c: "smileys" },
            { e: "üòú", k: ["„Ç¶„Ç§„É≥„ÇØ", "wink"], c: "smileys" },
            { e: "ü§™", k: ["Â§âÈ°î", "crazy"], c: "smileys" },
            { e: "ü§®", k: ["Áñë„ÅÑ", "suspect"], c: "smileys" },
            { e: "üßê", k: ["„É¢„Éé„ÇØ„É´", "analyze"], c: "smileys" },
            { e: "ü§ì", k: ["„É°„Ç¨„Éç", "nerd"], c: "smileys" },
            { e: "üòé", k: ["„Çµ„É≥„Ç∞„É©„Çπ", "cool"], c: "smileys" },
            { e: "ü•∏", k: ["Â§âË£Ö", "disguise"], c: "smileys" },
            { e: "ü•≥", k: ["„Éë„Éº„ÉÜ„Ç£", "„ÅäÁ•ù„ÅÑ", "party"], c: "smileys" },
            { e: "ü§Ø", k: ["ÁàÜÁô∫", "„Å≥„Å£„Åè„Çä", "mind blown"], c: "smileys" },
            { e: "üò≥", k: ["ÁÖß„Çå„Çã", "Ëµ§Èù¢", "flushed"], c: "smileys" },
            { e: "ü•∫", k: ["„ÅäÈ°ò„ÅÑ", "„ÅÜ„Çã„ÅÜ„Çã", "please"], c: "smileys" },
            { e: "ü´†", k: ["Ê∫∂„Åë„Çã", "„Å®„Åë„Çã", "melting"], c: "smileys" },
            { e: "ü´¢", k: ["„ÅÇ„Å£", "Êâã", "omg"], c: "smileys" },
            { e: "ü´£", k: ["Ë¶ó„ÅçË¶ã", "peek"], c: "smileys" },
            { e: "ü§î", k: ["ËÄÉ„Åà‰∏≠", "think"], c: "smileys" },
            { e: "ü§´", k: ["„Åó„Éº", "quiet"], c: "smileys" },
            { e: "ü§ê", k: ["„Ç∏„ÉÉ„Éë„Éº", "zip"], c: "smileys" },
            { e: "üòê", k: ["ÁúüÈ°î", "neutral"], c: "smileys" },
            { e: "üòë", k: ["ÁÑ°Ë°®ÊÉÖ", "expressionless"], c: "smileys" },
            { e: "üò∂", k: ["ÁÑ°Ë®Ä", "no mouth"], c: "smileys" },
            { e: "üòÆ", k: ["„Åä„Å©„Çç„Åç", "surprised"], c: "smileys" },
            { e: "ü§§", k: ["„Çà„Å†„Çå", "drooling"], c: "smileys" },
            { e: "üò¥", k: ["Áú†„ÅÑ", "sleep"], c: "smileys" },
            { e: "ü•±", k: ["„ÅÇ„Åè„Å≥", "yawn"], c: "smileys" },
            { e: "üò™", k: ["Áú†„ÅÑ", "sleepy"], c: "smileys" },
            { e: "üòµ", k: ["„ÇÅ„Åæ„ÅÑ", "dizzy"], c: "smileys" },
            { e: "ü§¢", k: ["Âêê„ÅçÊ∞ó", "nauseated"], c: "smileys" },
            { e: "ü§ß", k: ["„Åè„Åó„ÇÉ„Åø", "sneeze"], c: "smileys" },
            { e: "üò∑", k: ["„Éû„Çπ„ÇØ", "mask"], c: "smileys" },
            { e: "ü§í", k: ["ÁÜ±", "fever"], c: "smileys" },
            { e: "ü§ï", k: ["ÊÄ™Êàë", "bandage"], c: "smileys" },
            { e: "üò•", k: ["ÊÇ≤„Åó„ÅÑ", "sad", "disappointed"], c: "smileys" },
            { e: "üò≠", k: ["Ê≥£„Åç", "Âè∑Ê≥£", "cry", "sad"], c: "smileys" },
            { e: "üò±", k: ["ÊÅêÊÄñ", "scream"], c: "smileys" },
            { e: "üò°", k: ["ÊÄí„Çä", "angry", "rage"], c: "smileys" },
            { e: "üò†", k: ["ÊÄí", "mad"], c: "smileys" },
            { e: "üòà", k: ["ÊÇ™È≠î", "devil"], c: "smileys" },
            { e: "üëª", k: ["„Åä„Å∞„Åë", "ghost"], c: "smileys" },
            { e: "üéÉ", k: ["„Åã„Åº„Å°„ÇÉ", "halloween"], c: "smileys" },
            { e: "üò∫", k: ["Áå´", "Á¨ëÈ°î", "cat smile"], c: "smileys" },
            { e: "üòª", k: ["Áå´", "„Éè„Éº„Éà", "cat heart"], c: "smileys" },
            { e: "üòø", k: ["Áå´", "Ê≥£„Åç", "cat cry"], c: "smileys" },

            // ÂãïÁâ©„ÉªËá™ÁÑ∂ (Animals & Nature)
            { e: "üê∂", k: ["Áä¨", "dog"], c: "animals" },
            { e: "üê±", k: ["Áå´", "cat"], c: "animals" },
            { e: "üê≠", k: ["„Éç„Ç∫„Éü", "mouse"], c: "animals" },
            { e: "üêπ", k: ["„Éè„É†„Çπ„Çø„Éº", "hamster"], c: "animals" },
            { e: "üê∞", k: ["„Ç¶„Çµ„ÇÆ", "rabbit"], c: "animals" },
            { e: "ü¶ä", k: ["„Ç≠„ÉÑ„Éç", "fox"], c: "animals" },
            { e: "üêª", k: ["ÁÜä", "bear"], c: "animals" },
            { e: "üêº", k: ["„Éë„É≥„ÉÄ", "panda"], c: "animals" },
            { e: "üêª‚Äç‚ùÑÔ∏è", k: ["„Ç∑„É≠„ÇØ„Éû", "polar bear"], c: "animals" },
            { e: "üê®", k: ["„Ç≥„Ç¢„É©", "koala"], c: "animals" },
            { e: "üêØ", k: ["„Éà„É©", "tiger"], c: "animals" },
            { e: "ü¶Å", k: ["„É©„Ç§„Ç™„É≥", "lion"], c: "animals" },
            { e: "üêÆ", k: ["Áâõ", "cow"], c: "animals" },
            { e: "üê∑", k: ["Ë±ö", "pig"], c: "animals" },
            { e: "üê∏", k: ["„Ç´„Ç®„É´", "frog"], c: "animals" },
            { e: "üêµ", k: ["Áåø", "monkey"], c: "animals" },
            { e: "üêî", k: ["„Éã„ÉØ„Éà„É™", "chicken"], c: "animals" },
            { e: "üêß", k: ["„Éö„É≥„ÇÆ„É≥", "penguin"], c: "animals" },
            { e: "üê¶", k: ["È≥•", "bird"], c: "animals" },
            { e: "üê§", k: ["„Å≤„Çà„Åì", "chick"], c: "animals" },
            { e: "ü¶ã", k: ["Ëù∂", "butterfly"], c: "animals" },
            { e: "üêù", k: ["ËúÇ", "bee"], c: "animals" },
            { e: "üêû", k: ["„Å¶„Çì„Å®„ÅÜËô´", "ladybug"], c: "animals" },
            { e: "üêô", k: ["„Çø„Ç≥", "octopus"], c: "animals" },
            { e: "üê†", k: ["È≠ö", "fish"], c: "animals" },
            { e: "üê¨", k: ["„Ç§„É´„Ç´", "dolphin"], c: "animals" },
            { e: "üê≥", k: ["„ÇØ„Ç∏„É©", "whale"], c: "animals" },
            { e: "ü¶à", k: ["„Çµ„É°", "shark"], c: "animals" },
            { e: "üå∏", k: ["Ê°ú", "cherry blossom", "flower"], c: "animals" },
            { e: "üíÆ", k: ["„ÅØ„Å™„Åæ„Çã", "flower"], c: "animals" },
            { e: "üåπ", k: ["„Éê„É©", "rose"], c: "animals" },
            { e: "üåª", k: ["„Å≤„Åæ„Çè„Çä", "sunflower"], c: "animals" },
            { e: "üåº", k: ["Ëä±", "blossom"], c: "animals" },
            { e: "üå∑", k: ["„ÉÅ„É•„Éº„É™„ÉÉ„Éó", "tulip"], c: "animals" },
            { e: "üå±", k: ["ËäΩ", "seedling"], c: "animals" },
            { e: "ü™¥", k: ["Ë¶≥ËëâÊ§çÁâ©", "potted plant"], c: "animals" },
            { e: "üå≤", k: ["Êú®", "tree"], c: "animals" },
            { e: "üå≥", k: ["Êú®", "tree"], c: "animals" },
            { e: "üå¥", k: ["„É§„Ç∑„ÅÆÊú®", "palm tree"], c: "animals" },
            { e: "üçÅ", k: ["Á¥ÖËëâ", "„ÇÇ„Åø„Åò", "maple", "leaf"], c: "animals" },
            { e: "üçÇ", k: ["ËêΩ„Å°Ëëâ", "fallen leaf"], c: "animals" },
            { e: "üçÄ", k: ["„ÇØ„É≠„Éº„Éê„Éº", "clover"], c: "animals" },
            { e: "üçÑ", k: ["„Ç≠„Éé„Ç≥", "mushroom"], c: "animals" },
            { e: "üåà", k: ["Ëôπ", "rainbow"], c: "animals" },
            { e: "‚òÄÔ∏è", k: ["Â§™ÈôΩ", "Êô¥„Çå", "sun"], c: "animals" },
            { e: "üåô", k: ["Êúà", "moon"], c: "animals" },
            { e: "‚≠êÔ∏è", k: ["Êòü", "star"], c: "animals" },
            { e: "‚ùÑÔ∏è", k: ["Èõ™", "snow"], c: "animals" },
            { e: "‚òÅÔ∏è", k: ["Èõ≤", "„Åè„ÇÇ„Çä", "cloud"], c: "animals" },
            { e: "üåä", k: ["Ê≥¢", "wave"], c: "animals" },

            // ÊóÖË°å„ÉªÂ†¥ÊâÄ (Travel & Places)
            { e: "üöó", k: ["Ëªä", "car"], c: "travel" },
            { e: "üöï", k: ["„Çø„ÇØ„Ç∑„Éº", "taxi"], c: "travel" },
            { e: "üöå", k: ["„Éê„Çπ", "bus"], c: "travel" },
            { e: "üöë", k: ["ÊïëÊÄ•Ëªä", "ambulance"], c: "travel" },
            { e: "üöì", k: ["„Éë„Éà„Ç´„Éº", "police car"], c: "travel" },
            { e: "üöÉ", k: ["ÈõªËªä", "train"], c: "travel" },
            { e: "üöÖ", k: ["Êñ∞ÂππÁ∑ö", "bullet train"], c: "travel" },
            { e: "‚úàÔ∏è", k: ["È£õË°åÊ©ü", "airplane", "plane"], c: "travel" },
            { e: "üöÄ", k: ["„É≠„Ç±„ÉÉ„Éà", "rocket"], c: "travel" },
            { e: "üö¢", k: ["Ëàπ", "ship"], c: "travel" },
            { e: "üö≤", k: ["Ëá™Ëª¢Ëªä", "bicycle"], c: "travel" },
            { e: "üõµ", k: ["„Çπ„ÇØ„Éº„Çø„Éº", "scooter"], c: "travel" },
            { e: "üè†", k: ["ÂÆ∂", "house"], c: "travel" },
            { e: "üè°", k: ["ÂÆ∂", "house with garden"], c: "travel" },
            { e: "üè¢", k: ["„Éì„É´", "office"], c: "travel" },
            { e: "üè•", k: ["ÁóÖÈô¢", "hospital"], c: "travel" },
            { e: "üè™", k: ["„Ç≥„É≥„Éì„Éã", "convenience store"], c: "travel" },
            { e: "üè´", k: ["Â≠¶Ê†°", "school"], c: "travel" },
            { e: "üóº", k: ["Êù±‰∫¨„Çø„ÉØ„Éº", "tokyo tower"], c: "travel" },
            { e: "üóΩ", k: ["Ëá™Áî±„ÅÆÂ•≥Á•û", "statue of liberty"], c: "travel" },
            { e: "üè∞", k: ["Âüé", "castle"], c: "travel" },
            { e: "üèØ", k: ["Âüé", "japanese castle"], c: "travel" },
            { e: "‚õ©Ô∏è", k: ["È≥•Â±Ö", "shrine"], c: "travel" },
            { e: "üóª", k: ["ÂØåÂ£´Â±±", "fuji", "mountain"], c: "travel" },
            { e: "üèñÔ∏è", k: ["„Éì„Éº„ÉÅ", "beach"], c: "travel" },
            { e: "üèùÔ∏è", k: ["Â≥∂", "island"], c: "travel" },
            { e: "üèûÔ∏è", k: ["ÂÖ¨Âúí", "park"], c: "travel" },
            { e: "‚õ∫Ô∏è", k: ["„ÉÜ„É≥„Éà", "tent"], c: "travel" },
            { e: "‚ô®Ô∏è", k: ["Ê∏©Ê≥â", "hot springs"], c: "travel" },
            { e: "üåç", k: ["Âú∞ÁêÉ", "earth", "world"], c: "travel" },

            // È£ü„ÅπÁâ© (Food)
            { e: "üçî", k: ["„Éè„É≥„Éê„Éº„Ç¨„Éº", "burger"], c: "food" },
            { e: "üçü", k: ["„Éù„ÉÜ„Éà", "fries"], c: "food" },
            { e: "üçï", k: ["„Éî„Ç∂", "pizza"], c: "food" },
            { e: "üç£", k: ["ÂØøÂè∏", "sushi"], c: "food" },
            { e: "üçô", k: ["„Åä„Å´„Åé„Çä", "rice ball"], c: "food" },
            { e: "üçú", k: ["„É©„Éº„É°„É≥", "ramen", "noodle"], c: "food" },
            { e: "üçõ", k: ["„Ç´„É¨„Éº", "curry"], c: "food" },
            { e: "üçù", k: ["„Éë„Çπ„Çø", "spaghetti"], c: "food" },
            { e: "üç∞", k: ["„Ç±„Éº„Ç≠", "cake"], c: "food" },
            { e: "üéÇ", k: ["Ë™ïÁîüÊó•„Ç±„Éº„Ç≠", "birthday cake"], c: "food" },
            { e: "üßÅ", k: ["„Ç´„ÉÉ„Éó„Ç±„Éº„Ç≠", "cupcake"], c: "food" },
            { e: "üç©", k: ["„Éâ„Éº„Éä„ÉÑ", "donut"], c: "food" },
            { e: "üç™", k: ["„ÇØ„ÉÉ„Ç≠„Éº", "cookie"], c: "food" },
            { e: "üç´", k: ["„ÉÅ„Éß„Ç≥", "chocolate"], c: "food" },
            { e: "üç¨", k: ["È£¥", "candy"], c: "food" },
            { e: "üç≠", k: ["„É≠„É™„Éù„ÉÉ„Éó", "lollipop"], c: "food" },
            { e: "üçÆ", k: ["„Éó„É™„É≥", "pudding"], c: "food" },
            { e: "üç¶", k: ["„Ç¢„Ç§„Çπ", "ice cream"], c: "food" },
            { e: "üçß", k: ["„Åã„ÅçÊ∞∑", "shaved ice"], c: "food" },
            { e: "üçø", k: ["„Éù„ÉÉ„Éó„Ç≥„Éº„É≥", "popcorn"], c: "food" },
            { e: "ü•ê", k: ["„ÇØ„É≠„ÉØ„ÉÉ„Çµ„É≥", "croissant"], c: "food" },
            { e: "üçû", k: ["„Éë„É≥", "bread"], c: "food" },
            { e: "ü•û", k: ["„Éë„É≥„Ç±„Éº„Ç≠", "pancakes"], c: "food" },
            { e: "üç≥", k: ["ÁõÆÁéâÁÑº„Åç", "egg"], c: "food" },
            { e: "üçì", k: ["„ÅÑ„Å°„Åî", "strawberry"], c: "food" },
            { e: "üçé", k: ["„Çä„Çì„Åî", "apple"], c: "food" },
            { e: "üçâ", k: ["„Çπ„Ç§„Ç´", "watermelon"], c: "food" },
            { e: "üçå", k: ["„Éê„Éä„Éä", "banana"], c: "food" },
            { e: "üçç", k: ["„Éë„Ç§„Éä„ÉÉ„Éó„É´", "pineapple"], c: "food" },
            { e: "üçë", k: ["Ê°É", "peach"], c: "food" },
            { e: "üçí", k: ["„Åï„Åè„Çâ„Çì„Åº", "cherry"], c: "food" },
            { e: "üçá", k: ["„Å∂„Å©„ÅÜ", "grape"], c: "food" },
            { e: "üçµ", k: ["„ÅäËå∂", "tea"], c: "food" },
            { e: "‚òïÔ∏è", k: ["„Ç≥„Éº„Éí„Éº", "coffee"], c: "food" },
            { e: "üç∂", k: ["ÈÖí", "sake"], c: "food" },
            { e: "üç∫", k: ["„Éì„Éº„É´", "beer"], c: "food" },
            { e: "üçª", k: ["‰πæÊùØ", "cheers"], c: "food" },
            { e: "ü•Ç", k: ["‰πæÊùØ", "clinking glasses"], c: "food" },
            { e: "üç∑", k: ["„ÉØ„Ç§„É≥", "wine"], c: "food" },
            { e: "üçπ", k: ["„Ç´„ÇØ„ÉÜ„É´", "cocktail"], c: "food" },

            // „É¢„Éé (Objects)
            { e: "üéâ", k: ["„Éë„Éº„ÉÜ„Ç£", "„ÅäÁ•ù„ÅÑ", "party", "popper"], c: "objects" },
            { e: "üéä", k: ["„Åè„ÅôÁéâ", "confetti ball"], c: "objects" },
            { e: "ü•≥", k: ["„Éë„Éº„ÉÜ„Ç£È°î", "party face"], c: "objects" },
            { e: "üéà", k: ["È¢®Ëàπ", "balloon"], c: "objects" },
            { e: "üéÅ", k: ["„Éó„É¨„Çº„É≥„Éà", "gift"], c: "objects" },
            { e: "üéÄ", k: ["„É™„Éú„É≥", "ribbon"], c: "objects" },
            { e: "üéØ", k: ["„ÉÄ„Éº„ÉÑ", "target", "darts"], c: "objects" },
            { e: "üéÆ", k: ["„Ç≤„Éº„É†", "game"], c: "objects" },
            { e: "üß©", k: ["„Éë„Ç∫„É´", "puzzle"], c: "objects" },
            { e: "üé≤", k: ["„Çµ„Ç§„Ç≥„É≠", "dice"], c: "objects" },
            { e: "üé≥", k: ["„Éú„Éº„É™„É≥„Ç∞", "bowling"], c: "objects" },
            { e: "‚öΩÔ∏è", k: ["„Çµ„ÉÉ„Ç´„Éº", "soccer"], c: "objects" },
            { e: "üèÄ", k: ["„Éê„Çπ„Ç±", "basketball"], c: "objects" },
            { e: "‚öæÔ∏è", k: ["ÈáéÁêÉ", "baseball"], c: "objects" },
            { e: "üéæ", k: ["„ÉÜ„Éã„Çπ", "tennis"], c: "objects" },
            { e: "üèê", k: ["„Éê„É¨„Éº", "volleyball"], c: "objects" },
            { e: "üèä", k: ["Ê∞¥Ê≥≥", "swimming"], c: "objects" },
            { e: "üèÑ", k: ["„Çµ„Éº„Éï„Ç£„É≥", "surfing"], c: "objects" },
            { e: "üèÇ", k: ["„Çπ„Éé„Éú", "snowboard"], c: "objects" },
            { e: "üéø", k: ["„Çπ„Ç≠„Éº", "ski"], c: "objects" },
            { e: "üé£", k: ["Èá£„Çä", "fishing"], c: "objects" },
            { e: "üèïÔ∏è", k: ["„Ç≠„É£„É≥„Éó", "camping"], c: "objects" },
            { e: "üé¨", k: ["Êò†Áîª", "movie", "clapper"], c: "objects" },
            { e: "üé§", k: ["„Éû„Ç§„ÇØ", "mic", "karaoke"], c: "objects" },
            { e: "üéß", k: ["„Éò„ÉÉ„Éâ„Éõ„É≥", "music"], c: "objects" },
            { e: "üéº", k: ["Ê•ΩË≠ú", "music"], c: "objects" },
            { e: "üéπ", k: ["„Éî„Ç¢„Éé", "piano"], c: "objects" },
            { e: "üé∏", k: ["„ÇÆ„Çø„Éº", "guitar"], c: "objects" },
            { e: "üé®", k: ["„Ç¢„Éº„Éà", "art", "palette"], c: "objects" },
            { e: "üèÜ", k: ["„Éà„É≠„Éï„Ç£„Éº", "trophy"], c: "objects" },
            { e: "üíª", k: ["PC", "computer", "laptop"], c: "objects" },
            { e: "üì±", k: ["„Çπ„Éû„Éõ", "mobile", "phone"], c: "objects" },
            { e: "üí°", k: ["„Ç¢„Ç§„Éá„Ç¢", "ÈõªÁêÉ", "idea", "bulb"], c: "objects" },
            { e: "üí∞", k: ["„ÅäÈáë", "money", "bag"], c: "objects" },
            { e: "üíé", k: ["„ÉÄ„Ç§„É§", "diamond"], c: "objects" },
            { e: "üëë", k: ["ÁéãÂÜ†", "crown"], c: "objects" },
            { e: "üíç", k: ["ÊåáËº™", "ring"], c: "objects" },
            { e: "üíÑ", k: ["Âè£Á¥Ö", "lipstick"], c: "objects" },
            { e: "üìö", k: ["Êú¨", "book", "study"], c: "objects" },
            { e: "‚úèÔ∏è", k: ["ÈâõÁ≠Ü", "pencil"], c: "objects" },
            { e: "üìù", k: ["„É°„É¢", "memo"], c: "objects" },
            { e: "üìÖ", k: ["„Ç´„É¨„É≥„ÉÄ„Éº", "calendar"], c: "objects" },
            { e: "üóìÔ∏è", k: ["„Ç´„É¨„É≥„ÉÄ„Éº", "calendar"], c: "objects" },
            { e: "üï∞Ô∏è", k: ["ÊôÇË®à", "clock"], c: "objects" },
            { e: "‚è∞", k: ["ÁõÆË¶ö„Åæ„Åó", "alarm"], c: "objects" },
            { e: "‚è≥", k: ["Á†ÇÊôÇË®à", "hourglass"], c: "objects" },
            { e: "üîë", k: ["„Ç≠„Éº", "key"], c: "objects" },
            { e: "üîí", k: ["Èçµ", "lock", "secure"], c: "objects" },
            { e: "üîì", k: ["ÈñãÈå†", "unlock"], c: "objects" },
            { e: "üî®", k: ["„Éè„É≥„Éû„Éº", "hammer"], c: "objects" },
            { e: "üîß", k: ["„É¨„É≥„ÉÅ", "wrench", "tool"], c: "objects" },
            { e: "‚öôÔ∏è", k: ["Ê≠ØËªä", "gear", "settings"], c: "objects" },
            { e: "ü™Ñ", k: ["È≠îÊ≥ï„ÅÆÊùñ", "magic wand"], c: "objects" },
            { e: "üíä", k: ["Ëñ¨", "pill"], c: "objects" },
            { e: "üíâ", k: ["Ê≥®Â∞Ñ", "syringe"], c: "objects" },
            { e: "ü©π", k: ["ÁµÜÂâµËÜè", "bandage"], c: "objects" },
            { e: "üíå", k: ["„É©„Éñ„É¨„Çø„Éº", "love letter"], c: "objects" },
            { e: "üì¶", k: ["ÁÆ±", "package"], c: "objects" },
            { e: "üì∫", k: ["„ÉÜ„É¨„Éì", "tv"], c: "objects" },
            { e: "üì∏", k: ["„Ç´„É°„É©", "camera"], c: "objects" },

            // Ë®òÂè∑ (Symbols)
            { e: "‚ù§Ô∏è", k: ["„Éè„Éº„Éà", "Ëµ§", "heart", "love"], c: "symbols" },
            { e: "üß°", k: ["„Éè„Éº„Éà", "„Ç™„É¨„É≥„Ç∏", "orange heart"], c: "symbols" },
            { e: "üíõ", k: ["„Éè„Éº„Éà", "ÈªÑ", "yellow heart"], c: "symbols" },
            { e: "üíö", k: ["„Éè„Éº„Éà", "Á∑ë", "green heart"], c: "symbols" },
            { e: "üíô", k: ["„Éè„Éº„Éà", "Èùí", "blue heart"], c: "symbols" },
            { e: "üíú", k: ["„Éè„Éº„Éà", "Á¥´", "purple heart"], c: "symbols" },
            { e: "üñ§", k: ["„Éè„Éº„Éà", "Èªí", "black heart"], c: "symbols" },
            { e: "ü§ç", k: ["„Éè„Éº„Éà", "ÁôΩ", "white heart"], c: "symbols" },
            { e: "ü§é", k: ["„Éè„Éº„Éà", "Ëå∂", "brown heart"], c: "symbols" },
            { e: "üíî", k: ["Â§±ÊÅã", "broken heart"], c: "symbols" },
            { e: "‚ù§Ô∏è‚Äçüî•", k: ["ÁáÉ„Åà„Çã„Éè„Éº„Éà", "heart on fire"], c: "symbols" },
            { e: "‚ù§Ô∏è‚Äçü©π", k: ["ÁµÜÂâµËÜè„Éè„Éº„Éà", "mending heart"], c: "symbols" },
            { e: "‚ù£Ô∏è", k: ["ÊÑüÂòÜÁ¨¶„Éè„Éº„Éà", "heart exclamation"], c: "symbols" },
            { e: "üíï", k: ["2„Å§„ÅÆ„Éè„Éº„Éà", "two hearts"], c: "symbols" },
            { e: "üíû", k: ["Âõû„Çã„Éè„Éº„Éà", "revolving hearts"], c: "symbols" },
            { e: "üíì", k: ["ÈºìÂãï", "beating heart"], c: "symbols" },
            { e: "üíó", k: ["ÊàêÈï∑", "growing heart"], c: "symbols" },
            { e: "üíñ", k: ["„Ç≠„É©„Ç≠„É©„Éè„Éº„Éà", "sparkling heart"], c: "symbols" },
            { e: "üíò", k: ["Áü¢", "heart with arrow"], c: "symbols" },
            { e: "üíù", k: ["„É™„Éú„É≥„Éè„Éº„Éà", "heart with ribbon"], c: "symbols" },
            { e: "üíü", k: ["„Éè„Éº„Éà", "heart decoration"], c: "symbols" },
            { e: "üî•", k: ["ÁÅ´", "fire", "hot"], c: "symbols" },
            { e: "‚ú®", k: ["„Ç≠„É©„Ç≠„É©", "sparkles"], c: "symbols" },
            { e: "üåü", k: ["Ëºù„ÅèÊòü", "glowing star"], c: "symbols" },
            { e: "üí´", k: ["„ÇÅ„Åæ„ÅÑ", "dizzy", "star"], c: "symbols" },
            { e: "üí•", k: ["ÁàÜÁô∫", "collision", "boom"], c: "symbols" },
            { e: "üí®", k: ["„ÉÄ„ÉÉ„Ç∑„É•", "dash"], c: "symbols" },
            { e: "üí¶", k: ["Ê±ó", "sweat", "drops"], c: "symbols" },
            { e: "üí§", k: ["Áú†„Çä", "zzz", "sleep"], c: "symbols" },
            { e: "üíØ", k: ["100ÁÇπ", "100", "perfect"], c: "symbols" },
            { e: "‚≠ïÔ∏è", k: ["‰∏∏", "„Åæ„Çã", "ok", "circle"], c: "symbols" },
            { e: "‚ùå", k: ["„Éê„ÉÑ", "„Å∞„Å§", "no", "cross"], c: "symbols" },
            { e: "‚ùì", k: ["Ôºü", "„ÅØ„Å¶„Å™", "question"], c: "symbols" },
            { e: "‚ùóÔ∏è", k: ["ÔºÅ", "„Å≥„Å£„Åè„Çä", "exclamation"], c: "symbols" },
            { e: "‚úÖ", k: ["„ÉÅ„Çß„ÉÉ„ÇØ", "check", "mark"], c: "symbols" },
            { e: "‚ùé", k: ["„ÉÅ„Çß„ÉÉ„ÇØ", "cross mark"], c: "symbols" },
            { e: "‚ö†Ô∏è", k: ["Ë≠¶Âëä", "warning"], c: "symbols" },
            { e: "‚û°Ô∏è", k: ["Áü¢Âç∞", "Âè≥", "arrow", "right"], c: "symbols" },
            { e: "‚¨ÜÔ∏è", k: ["Áü¢Âç∞", "‰∏ä", "arrow", "up"], c: "symbols" },
            { e: "‚¨áÔ∏è", k: ["Áü¢Âç∞", "‰∏ã", "arrow", "down"], c: "symbols" },
        ];

        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÁä∂ÊÖã
        const state = {
            links: [], // „Çµ„Éº„Éê„Éº„Åã„ÇâÂèñÂæó„Åó„Åü„Éá„Éº„Çø
            originalLinks: [], // „Ç≠„É£„É≥„Çª„É´Áî®„Å´‰øùÊåÅ„Åô„ÇãÂÖÉ„ÅÆ„Éá„Éº„Çø
            editMode: false,
            sortableInstance: null,
            defaultColor: '#6366f1', // Indigo-600
            currentEmojiInput: null, // ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº„ÅåÂØæË±°„Å®„Åô„ÇãÂÖ•ÂäõÊ¨Ñ
            currentEmojiCategory: 'smileys', // ‚òÖËøΩÂä†: ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº„ÅÆÁèæÂú®„Ç´„ÉÜ„Ç¥„É™
        };

        // DOMË¶ÅÁ¥†
        const $ = {
            linksContainer: document.getElementById('links-container'),
            loadingSpinner: document.getElementById('loading-spinner'),
            emptyState: document.getElementById('empty-state'),
            toggleEditModeBtn: document.getElementById('toggle-edit-mode'),
            toggleEditText: document.getElementById('toggle-edit-text'),
            iconSettings: document.getElementById('icon-settings'),
            iconClose: document.getElementById('icon-close'),
            editControls: document.getElementById('edit-controls'), // „Éï„ÉÉ„Çø„Éº („Éí„É≥„ÉàÁî®)
            addCardContainer: document.getElementById('add-card-container'), // Êñ∞Ë¶èËøΩÂä†„Éú„Çø„É≥„ÅÆ„Ç≥„É≥„ÉÜ„Éä
            addNewCardBtn: document.getElementById('add-new-card-btn'), // Êñ∞Ë¶èËøΩÂä†„Éú„Çø„É≥
            editModeActions: document.getElementById('edit-mode-actions'), // „Éò„ÉÉ„ÉÄ„Éº„ÅÆ‰øùÂ≠ò/„Ç≠„É£„É≥„Çª„É´„Ç≥„É≥„ÉÜ„Éä
            saveChangesBtn: document.getElementById('save-changes'), // „Éò„ÉÉ„ÉÄ„Éº„ÅÆ‰øùÂ≠ò„Éú„Çø„É≥
            cancelChangesBtn: document.getElementById('cancel-changes'), // „Éò„ÉÉ„ÉÄ„Éº„ÅÆ„Ç≠„É£„É≥„Çª„É´„Éú„Çø„É≥
            toastContainer: document.getElementById('toast-container'),
            // ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº
            emojiPickerModal: document.getElementById('emoji-picker-modal'),
            emojiPickerContent: document.getElementById('emoji-picker-content'),
            emojiSearchInput: document.getElementById('emoji-search-input'),
            emojiPickerTabs: document.getElementById('emoji-picker-tabs'), // ‚òÖËøΩÂä†
            emojiPickerGrid: document.getElementById('emoji-picker-grid'),
        };

        // --- APIÈÄö‰ø° ---

        async function fetchLinks() {
            try {
                // ‚òÖ ‰øÆÊ≠£: „Çµ„Éº„Éê„Éº„ÅÆAPI„ÇíÂëº„Å≥Âá∫„Åô
                const response = await fetch('/api/links');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                state.links = data || []; // null„ÅÆÂ†¥Âêà„ÇÇËÄÉÊÖÆ
                state.originalLinks = JSON.parse(JSON.stringify(state.links));
            } catch (error) {
                console.error(error);
                showToast('„É™„É≥„ÇØ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
                state.links = [];
                state.originalLinks = [];
            }
        }

        async function postLinks(linksToSave) {
            try {
                // ‚òÖ ‰øÆÊ≠£: „Çµ„Éº„Éê„Éº„ÅÆAPI„Å´POST„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ„Çã
                const response = await fetch('/api/links', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(linksToSave),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // „Çµ„Éº„Éê„Éº„Åã„ÇâËøîÂç¥„Åï„Çå„Åü‰øùÂ≠òÊ∏à„Åø„ÅÆ„Éá„Éº„Çø„ÇíÁä∂ÊÖã„Å´„Çª„ÉÉ„Éà
                const savedData = await response.json();
                
                state.links = savedData || [];
                state.originalLinks = JSON.parse(JSON.stringify(state.links));
                showToast('Â§âÊõ¥„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü', 'success');
                return true;
            } catch (error) {
                console.error(error);
                showToast('‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
                return false;
            }
        }

        // --- „É¨„É≥„ÉÄ„É™„É≥„Ç∞ ---

        function render() {
            $.linksContainer.innerHTML = '';
            
            if (state.links.length === 0 && !state.editMode) {
                $.emptyState.classList.remove('hidden');
                $.loadingSpinner.classList.add('hidden');
            } else {
                 $.emptyState.classList.add('hidden');
                 $.loadingSpinner.classList.add('hidden');
            }

            state.links.forEach(link => {
                const card = createLinkCard(link);
                $.linksContainer.appendChild(card);
            });

            setupLinkCardEventListeners();
            setupSortable();
        }

        function createLinkCard(link) {
            const div = document.createElement('div');
            const color = link.color || state.defaultColor;
            
            div.className = `link-card bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 transition-all duration-300 border-l-4 ${state.editMode ? 'shadow-lg' : 'hover:shadow-lg hover:scale-[1.02]'}`;
            div.style.borderColor = color; // Â∑¶„Éú„Éº„ÉÄ„Éº„Å´Ëâ≤„ÇíÈÅ©Áî®
            div.dataset.id = link.id;

            // Á∑®ÈõÜ„É¢„Éº„ÉâUI
            const editModeUI = `
                <div class="p-4">
                    <div class="drag-handle absolute top-2 right-2 p-1 text-gray-400 dark:text-gray-500 cursor-move" title="„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶‰∏¶„Å≥Êõø„Åà">
                        ${icons.handle}
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex gap-3 items-start">
                            <!-- Ëâ≤ -->
                            <div class="flex-shrink-0">
                                <label class="block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">Ëâ≤</label>
                                <input type="color" value="${escapeHTML(color)}" data-field="color" class="edit-input" title="„Ç´„É©„Éº„Éî„ÉÉ„Ç´„Éº">
                            </div>
                            <!-- ÁµµÊñáÂ≠ó -->
                            <div class="flex-shrink-0 w-16">
                                <label class="block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">ÁµµÊñáÂ≠ó</label>
                                <input type="text" value="${escapeHTML(link.emoji || '')}" data-field="emoji" class="edit-input emoji-input mt-0.5 block w-full text-lg text-center rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-white dark:bg-gray-700 py-2 px-3 cursor-pointer" maxlength="4" readonly>
                            </div>
                            <!-- ÂêçÂâç -->
                            <div class="flex-grow min-w-0">
                                <label class="block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">ÂêçÂâç</label>
                                <input type="text" value="${escapeHTML(link.name)}" data-field="name" class="edit-input mt-0.5 block w-full font-semibold rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-white dark:bg-gray-700 py-2 px-3">
                            </div>
                        </div>
                        
                        <!-- URL -->
                        <div>
                            <label class="block text-xs font-medium text-gray-500 dark:text-gray-400">URL</label>
                            <input type="text" value="${escapeHTML(link.url)}" data-field="url" class="edit-input mt-0.5 block w-full text-sm rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-white dark:bg-gray-700 py-2 px-3">
                        </div>
                        
                        <!-- Ë™¨Êòé -->
                        <div>
                            <label class="block text-xs font-medium text-gray-500 dark:text-gray-400">Ë™¨Êòé („É°„É¢)</label>
                            <textarea data-field="description" class="edit-input mt-0.5 block w-full text-sm rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-white dark:bg-gray-700" rows="2" placeholder="„Åì„ÅÆ„É™„É≥„ÇØ„ÅÆÁ∞°Âçò„Å™Ë™¨ÊòéÔºàÁ∑®ÈõÜ‰∏≠„ÅÆ„ÅøË°®Á§∫Ôºâ">${escapeHTML(link.description || '')}</textarea>
                        </div>
                    </div>
                    
                    <div class="flex justify-end gap-2 mt-4">
                        <button class="btn-delete p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-red-100 dark:hover:bg-red-900 hover:text-red-600 dark:hover:text-red-400 transition-colors" title="ÂâäÈô§">
                            ${icons.delete}
                        </button>
                    </div>
                </div>
            `;

            // Ë°®Á§∫„É¢„Éº„ÉâUI
            const emojiHTML = link.emoji ? `<span class="text-2xl mr-3">${escapeHTML(link.emoji)}</span>` : '';
            const viewModeUI = `
                <a href="${escapeHTML(link.url)}" target="_blank" rel="noopener noreferrer" class="block p-5 h-full group">
                    <div class="flex items-center">
                        ${emojiHTML}
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200 group-hover:underline truncate" style="color: ${escapeHTML(color)}">
                            ${escapeHTML(link.name)}
                        </h3>
                    </div>
                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-2 truncate ${link.emoji ? 'ml-10' : ''}">
                        ${escapeHTML(link.url)}
                    </p>
                </a>
                <div class="absolute bottom-3 right-3">
                    <button class="btn-copy p-2 rounded-lg text-gray-400 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors" title="„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº">
                        ${icons.copy}
                    </button>
                </div>
            `;

            div.innerHTML = `
                <div class="relative h-full">
                    ${state.editMode ? editModeUI : viewModeUI}
                </div>
            `;
            return div;
        }

        // --- „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö ---

        function setupLinkCardEventListeners() {
            document.querySelectorAll('.link-card').forEach(card => {
                const id = card.dataset.id;
                
                if (state.editMode) {
                    // Á∑®ÈõÜ„É¢„Éº„Éâ„ÅÆ„Ç§„Éô„É≥„Éà
                    const inputs = card.querySelectorAll('.edit-input');
                    inputs.forEach(input => {
                        if (input.classList.contains('emoji-input')) {
                            input.addEventListener('focus', (e) => {
                                openEmojiPicker(e.target);
                            });
                        } else {
                            // „Åù„ÅÆ‰ªñ„ÅÆÂÖ•ÂäõÊ¨Ñ
                            input.addEventListener('input', (e) => {
                                const field = e.target.dataset.field;
                                const link = state.links.find(l => l.id === id);
                                if (link) {
                                    link[field] = e.target.value;
                                    if (field === 'color') {
                                        card.style.borderColor = e.target.value;
                                    }
                                }
                            });
                        }
                    });

                    const deleteBtn = card.querySelector('.btn-delete');
                    deleteBtn?.addEventListener('click', () => handleDeleteLink(id));

                } else {
                    // Ë°®Á§∫„É¢„Éº„Éâ„ÅÆ„Ç§„Éô„É≥„Éà
                    const copyBtn = card.querySelector('.btn-copy');
                    copyBtn?.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        handleCopyLink(id, copyBtn);
                    });
                }
            });
        }

        // --- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éè„É≥„Éâ„É© ---

        function toggleEditMode() {
            state.editMode = !state.editMode;
            
            $.toggleEditText.textContent = state.editMode ? 'Ë®≠ÂÆöÂÆå‰∫Ü' : 'Ë®≠ÂÆö„É¢„Éº„Éâ';
            $.iconSettings.classList.toggle('hidden', state.editMode);
            $.iconClose.classList.toggle('hidden', !state.editMode);

            $.editModeActions.classList.toggle('hidden', !state.editMode);
            $.editControls.classList.toggle('hidden', !state.editMode);
            $.addCardContainer.classList.toggle('hidden', !state.editMode);

            if (state.editMode) {
                $.toggleEditModeBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                $.toggleEditModeBtn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                state.originalLinks = JSON.parse(JSON.stringify(state.links));
            } else {
                $.toggleEditModeBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                $.toggleEditModeBtn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
            }
            
            render();
        }

        function handleAddNewCard() {
            const newLink = {
                id: 'id-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                name: "Êñ∞„Åó„ÅÑ„É™„É≥„ÇØ",
                url: "http://example.com",
                emoji: "‚ú®",
                color: state.defaultColor,
                description: "",
            };

            state.links.unshift(newLink);
            render();
            
            const newCardElement = document.querySelector(`[data-id="${newLink.id}"]`);
            if (newCardElement) {
                newCardElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            showToast('Êñ∞„Åó„ÅÑ„Ç´„Éº„Éâ„Çí„É™„Çπ„Éà„ÅÆÂÖàÈ†≠„Å´ËøΩÂä†„Åó„Åæ„Åó„Åü', 'info');
        }


        async function handleSaveChanges() {
            if (state.sortableInstance) {
                const newOrder = state.sortableInstance.toArray();
                const newLinks = newOrder.map(id => state.links.find(link => link.id === id));
                state.links = newLinks.filter(Boolean);
            }
            
            const success = await postLinks(state.links);
            if (success) {
                toggleEditMode();
            }
        }

        function handleCancelChanges() {
            state.links = JSON.parse(JSON.stringify(state.originalLinks));
            toggleEditMode();
            render();
            showToast('Â§âÊõ¥„ÅØÁ†¥Ê£Ñ„Åï„Çå„Åæ„Åó„Åü', 'info');
        }

        function handleDeleteLink(id) {
            const link = state.links.find(l => l.id === id);
            // confirm() „ÅØCanvasÁí∞Â¢É„Åß„ÅØ‰Ωø„Åà„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÁ∞°ÊòìÁöÑ„Å™Á¢∫Ë™ç„Å®„Åó„Åæ„Åô„ÄÇ
            // Êú¨Áï™Áí∞Â¢É„Åß„ÅØ„Ç´„Çπ„Çø„É†„É¢„Éº„ÉÄ„É´„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ
            const confirmed = window.confirm(`„Äå${link.emoji || ''} ${link.name}„Äç„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`);
            if (confirmed) {
                state.links = state.links.filter(l => l.id !== id);
                render();
                showToast('„É™„É≥„ÇØ„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ‰øùÂ≠ò„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', 'info');
            }
        }

        function handleCopyLink(id, button) {
            const link = state.links.find(l => l.id === id);
            if (!link) return;
            const url = link.url;

            const textarea = document.createElement('textarea');
            textarea.value = url;
            textarea.style.position = 'fixed';
            textarea.style.opacity = 0;
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            
            let success = false;
            try {
                // execCommand„ÅØÈùûÊé®Â•®„Åß„Åô„Åå„ÄÅCanvas iframe„ÅÆÂà∂Èôê„ÅÆ„Åü„ÇÅ„Åì„Å°„Çâ„Çí‰ΩøÁî®„Åó„Åæ„Åô
                success = document.execCommand('copy');
            } catch (err) {
                console.error('Copy failed:', err);
                success = false;
            }

            document.body.removeChild(textarea);
            
            if (success) {
                showToast('„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü!', 'success');
                const originalIcon = button.innerHTML;
                button.innerHTML = icons.check;
                setTimeout(() => {
                    button.innerHTML = originalIcon;
                }, 2000);
            } else {
                showToast('„Ç≥„Éî„Éº„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
            }
        }

        // --- ‚òÖ ‰øÆÊ≠£: ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„ÉºÈñ¢ÈÄ£ ---

        function renderEmojiPicker() {
            $.emojiPickerGrid.innerHTML = '';
            const query = $.emojiSearchInput.value.toLowerCase().trim();

            let filteredEmojis;

            if (query) {
                // Ê§úÁ¥¢ÊôÇ: „Ç´„ÉÜ„Ç¥„É™„ÇíÁÑ°Ë¶ñ„Åó„Å¶ÂÖ®‰ª∂Ê§úÁ¥¢
                filteredEmojis = emojiPickerData.filter(emoji => {
                    return emoji.e.includes(query) || 
                           emoji.k.some(k => k.toLowerCase().includes(query));
                });
            } else {
                // ÈÄöÂ∏∏ÊôÇ: ÁèæÂú®„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
                filteredEmojis = emojiPickerData.filter(emoji => emoji.c === state.currentEmojiCategory);
            }

            if (filteredEmojis.length === 0) {
                $.emojiPickerGrid.innerHTML = `<p class="col-span-7 sm:col-span-8 text-center text-gray-500 dark:text-gray-400">Ë¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</p>`;
                return;
            }

            filteredEmojis.forEach(emoji => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'emoji-btn text-2xl p-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500';
                btn.textContent = emoji.e;
                btn.setAttribute('role', 'gridcell');
                btn.setAttribute('aria-label', emoji.k[0]); // „É©„Éô„É´Ôºà‰æã: Á¨ëÈ°îÔºâ
                btn.addEventListener('click', () => {
                    selectEmoji(emoji.e);
                });
                $.emojiPickerGrid.appendChild(btn);
            });
        }

        function renderEmojiTabs() {
            $.emojiPickerTabs.innerHTML = '';
            Object.keys(emojiCategories).forEach(key => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'emoji-tab-btn px-3 py-1.5 rounded-md text-sm font-medium';
                btn.textContent = emojiCategories[key]; // ‰æã: "È°î"
                btn.dataset.category = key; // ‰æã: "smileys"
                btn.setAttribute('role', 'tab');
                btn.setAttribute('aria-selected', state.currentEmojiCategory === key);

                btn.addEventListener('click', () => {
                    state.currentEmojiCategory = key;
                    $.emojiSearchInput.value = ''; // „Çø„ÉñÂàá„ÇäÊõø„ÅàÊôÇ„ÅØÊ§úÁ¥¢„Çí„É™„Çª„ÉÉ„Éà
                    renderEmojiTabs(); // „Çø„Éñ„ÅÆÈÅ∏ÊäûÁä∂ÊÖã„ÇíÊõ¥Êñ∞
                    renderEmojiPicker(); // „Ç∞„É™„ÉÉ„Éâ„ÇíÊõ¥Êñ∞
                });
                $.emojiPickerTabs.appendChild(btn);
            });
        }

        function openEmojiPicker(targetInput) {
            if (!state.editMode) return;
            state.currentEmojiInput = targetInput;
            state.currentEmojiCategory = 'smileys'; // „Éá„Éï„Ç©„É´„Éà„Ç´„ÉÜ„Ç¥„É™
            
            $.emojiSearchInput.value = '';
            renderEmojiTabs(); // „Çø„Éñ„ÇíÊèèÁîª
            renderEmojiPicker(); // ÁµµÊñáÂ≠ó„Ç∞„É™„ÉÉ„Éâ„ÇíÊèèÁîª
            
            $.emojiPickerModal.classList.remove('hidden');
            $.emojiSearchInput.focus();
        }

        function closeEmojiPicker() {
            $.emojiPickerModal.classList.add('hidden');
            if (state.currentEmojiInput) {
                state.currentEmojiInput.blur();
            }
            state.currentEmojiInput = null;
        }

        function selectEmoji(emoji) {
            if (state.currentEmojiInput) {
                state.currentEmojiInput.value = emoji;
                
                // Â§âÊõ¥„Çístate„Å´Âç≥ÊôÇÂèçÊò†
                const id = state.currentEmojiInput.closest('.link-card').dataset.id;
                const link = state.links.find(l => l.id === id);
                if (link) {
                    link.emoji = emoji;
                }
            }
            closeEmojiPicker();
        }


        // --- „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£ ---

        function setupSortable() {
            if (state.editMode) {
                if (state.sortableInstance) {
                    state.sortableInstance.destroy();
                }
                state.sortableInstance = Sortable.create($.linksContainer, {
                    animation: 150,
                    handle: '.drag-handle',
                    ghostClass: 'sortable-ghost',
                    chosenClass: 'sortable-chosen',
                });
            } else {
                if (state.sortableInstance) {
                    state.sortableInstance.destroy();
                    state.sortableInstance = null;
                }
            }
        }

        function showToast(message, type = 'info') {
            const colors = {
                info: 'bg-blue-500',
                success: 'bg-green-500',
                error: 'bg-red-500',
            };
            const toast = document.createElement('div');
            toast.className = `toast-message toast-enter ${colors[type]} text-white px-4 py-2 rounded-lg shadow-md`;
            toast.textContent = message;
            
            $.toastContainer.appendChild(toast);
            
            requestAnimationFrame(() => {
                toast.classList.remove('toast-enter');
            });

            setTimeout(() => {
                toast.classList.add('toast-leave');
                toast.addEventListener('transitionend', () => {
                    toast.remove();
                });
            }, 3000);
        }

        function escapeHTML(str) {
            if (str === null || str === undefined) {
                return '';
            }
            return String(str).replace(/[&<>"']/g, function(match) {
                return {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#39;'
                }[match];
            });
        }

        // --- ÂàùÊúüÂåñ ---

        async function init() {
            // „É°„Ç§„É≥„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            $.toggleEditModeBtn.addEventListener('click', toggleEditMode);
            $.addNewCardBtn.addEventListener('click', handleAddNewCard);
            $.saveChangesBtn.addEventListener('click', handleSaveChanges);
            $.cancelChangesBtn.addEventListener('click', handleCancelChanges);

            // ÁµµÊñáÂ≠ó„Éî„ÉÉ„Ç´„Éº„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            $.emojiSearchInput.addEventListener('input', renderEmojiPicker); // ÂºïÊï∞„Å™„Åó„ÅßÂëº„Å≥Âá∫„Åô
            // „É¢„Éº„ÉÄ„É´„ÅÆÂ§ñÂÅ¥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„ÇâÈñâ„Åò„Çã
            $.emojiPickerModal.addEventListener('click', (e) => {
                if (e.target === $.emojiPickerModal) {
                    closeEmojiPicker();
                }
            });

            // „Éá„Éº„Çø„Çí„É≠„Éº„Éâ„Åó„Å¶ÂàùÂõûÊèèÁîª
            await fetchLinks();
            render();
        }

        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
